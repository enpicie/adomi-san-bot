name: Dev Pipeline

on:
  # Trigger on push to branches excluding main.
  push:
    branches-ignore:
      - main
    tags:
      - '!*' # Avoid accidental trigger on tag creation.

permissions:
  contents: write # This is required for actions/checkout and tag creation

jobs:
  Deploy:
    uses: ./.github/workflows/action_deploy.yml
    with:
      app_name: 'startgg-bracket-helper-bot'
      deployment_env: 'dev'
      aws_region: 'us-east-2'
      artifact_s3_bucket: 'enpicie-dev-lambda-artifacts'
      hcp_terraform_org: 'enpicie'
      hcp_terraform_workspace: 'startgg-bracket-helper-bot-dev'
      hcp_terraform_project: 'AWS-FGC'
    secrets: inherit
